<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>AI Video Editor</title>

    <style>
      body {
        margin: 0;
        font-family: Inter, Arial, sans-serif;
        background: #0b1220;
        color: white;
      }

      /* ===== TOP NAV ===== */
      .topbar {
        height: 60px;
        background: #0f172a;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 25px;
        border-bottom: 1px solid #1e293b;
      }

      .logo {
        font-weight: 700;
        font-size: 18px;
        color: #7c9cff;
      }

      /* ===== MAIN LAYOUT ===== */
      .editor {
        display: flex;
        height: calc(100vh - 60px);
      }

      /* ===== LEFT TOOLBAR ===== */
      .toolbar {
        width: 80px;
        background: #020617;
        border-right: 1px solid #1e293b;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 20px;
      }

      .toolbtn {
        width: 50px;
        height: 50px;
        margin: 10px 0;
        border-radius: 12px;
        background: #0f172a;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
      }

      .toolbtn:hover {
        background: #1e293b;
      }

      /* ===== CENTER CANVAS ===== */
      .canvasArea {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        background: radial-gradient(circle at center, #0f172a, #020617);
      }

      .videoCard {
        position: relative;
        padding: 10px;
        border-radius: 20px;
        background: #020617;
        box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
      }

      video {
        max-width: 900px;
        border-radius: 14px;
      }

      /* Crop box */
      #cropBox {
        position: absolute;
        border: 3px dashed #7c9cff;
        background: rgba(124, 156, 255, 0.15);
        cursor: move;
      }

      /* ===== RIGHT PANEL ===== */
      .sidepanel {
        width: 320px;
        background: #020617;
        border-left: 1px solid #1e293b;
        padding: 25px;
        overflow: auto;
      }

      .panelCard {
        background: #0f172a;
        padding: 18px;
        border-radius: 14px;
        margin-bottom: 18px;
      }

      select,
      input,
      button {
        width: 100%;
        padding: 10px;
        border-radius: 10px;
        border: none;
        margin-top: 8px;
        background: #020617;
        color: white;
      }

      button {
        background: #7c9cff;
        cursor: pointer;
        font-weight: 600;
      }

      button:hover {
        opacity: 0.9;
      }

      label {
        font-size: 13px;
        color: #94a3b8;
      }
    </style>
  </head>

  <body>
    <!-- TOP NAV -->
    <div class="topbar">
      <div class="logo">AI Video Editor</div>
      <div>Export</div>
    </div>

    <div class="editor">
      <!-- LEFT TOOLBAR -->
      <div class="toolbar">
        <div class="toolbtn">ðŸŽ¬</div>
        <div class="toolbtn">âœ¨</div>
        <div class="toolbtn">ðŸŽ¨</div>
        <div class="toolbtn">ðŸ”Š</div>
      </div>

      <!-- CENTER VIDEO -->
      <div class="canvasArea">
        <div class="videoCard">
          <video id="videoPreview" controls></video>
          <div id="cropBox"></div>
        </div>
      </div>

      <!-- RIGHT PANEL -->
      <div class="sidepanel">
        <form method="POST" enctype="multipart/form-data">
          <div class="panelCard">
            <label>Upload Video</label>
            <input
              type="file"
              id="videoFile"
              name="video"
              accept="video/*"
              required
            />
          </div>

          <div class="panelCard">
            <label>Aspect Ratio</label>
            <select name="ratio" id="ratioSelect">
              {% for r, desc in ratios.items() %}
              <option value="{{ r }}">{{ r }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="panelCard">
            <label>Filter</label>
            <select name="filter">
              {% for f in filters.keys() %}
              <option value="{{ f }}">{{ f }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="panelCard">
            <label>Zoom</label>
            <select name="zoom">
              {% for z in zooms.keys() %}
              <option value="{{ z }}">{{ z }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="panelCard">
            <label>Green Screen</label>
            <input type="checkbox" name="greenscreen" />
            <input type="file" name="background" />
          </div>

          <div class="panelCard">
            <label>Cut Silence</label>
            <input type="checkbox" name="cutsilence" />
          </div>

          <input type="hidden" id="cropX" name="cropX" />
          <input type="hidden" id="cropY" name="cropY" />
          <input type="hidden" id="cropW" name="cropW" />
          <input type="hidden" id="cropH" name="cropH" />

          <button type="submit">Process Video</button>
        </form>
      </div>
    </div>

    <script>
      const videoFile = document.getElementById("videoFile");
      const videoPreview = document.getElementById("videoPreview");
      const cropBox = document.getElementById("cropBox");
      const ratioSelect = document.getElementById("ratioSelect");

      videoFile.addEventListener("change", () => {
        const file = videoFile.files[0];
        if (file) {
          videoPreview.src = URL.createObjectURL(file);
        }
      });

      let dragging = false,
        startX,
        startY;

      cropBox.addEventListener("mousedown", (e) => {
        dragging = true;
        startX = e.clientX - cropBox.offsetLeft;
        startY = e.clientY - cropBox.offsetTop;
      });

      document.addEventListener("mousemove", (e) => {
        if (!dragging) return;
        cropBox.style.left = e.clientX - startX + "px";
        cropBox.style.top = e.clientY - startY + "px";
      });

      document.addEventListener("mouseup", () => (dragging = false));

      document.querySelector("form").addEventListener("submit", () => {
        const rect = cropBox.getBoundingClientRect();
        const vidRect = videoPreview.getBoundingClientRect();

        const scaleX = videoPreview.videoWidth / vidRect.width;
        const scaleY = videoPreview.videoHeight / vidRect.height;

        cropX.value = Math.round((rect.left - vidRect.left) * scaleX);
        cropY.value = Math.round((rect.top - vidRect.top) * scaleY);
        cropW.value = Math.round(rect.width * scaleX);
        cropH.value = Math.round(rect.height * scaleY);
      });
    </script>
  </body>
</html>
